document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelectorAll(".registerBtn"),t=document.getElementById("registrationModal"),n=document.getElementById("closeModalBtn"),l=document.querySelector(".homeModalOverlay"),o=document.getElementById("registrationForm"),i=document.getElementById("phone"),a=document.getElementById("phoneError"),d=document.getElementById("name"),c=document.getElementById("nameError"),r=document.getElementById("submitBtn"),s=document.getElementById("selectedCountry"),h=document.getElementById("selectedCountryCode"),m=document.getElementById("countryDropdown"),u=document.getElementById("dropdownIcon"),g=[{name:"Tajikistan",code:"+992"},{name:"Uzbekistan",code:"+998"},{name:"AQSH",code:"+1"},{name:"Janubiy Koreya",code:"+82"},{name:"Qirg’iziston",code:"+996"},{name:"Qozog’iston",code:"+7"},{name:"Turkmaniston",code:"+993"},{name:"Polsha",code:"+48"}],y={"+992":{placeholder:"55 555 5555",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(2,e.length))),e.length>2&&(t+=" "+e.slice(2,Math.min(5,e.length))),e.length>5&&(t+=" "+e.slice(5,Math.min(9,e.length))),t},validate:function(e){return/^\d{2} \d{3} \d{4}$/.test(e)}},"+998":{placeholder:"88 888 88 88",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(2,e.length))),e.length>2&&(t+=" "+e.slice(2,Math.min(5,e.length))),e.length>5&&(t+=" "+e.slice(5,Math.min(7,e.length))),e.length>7&&(t+=" "+e.slice(7,Math.min(9,e.length))),t},validate:function(e){return/^\d{2} \d{3} \d{2} \d{2}$/.test(e)}},"+1":{placeholder:"555 123 4567",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(3,e.length))),e.length>3&&(t+=" "+e.slice(3,Math.min(6,e.length))),e.length>6&&(t+=" "+e.slice(6,Math.min(10,e.length))),t},validate:function(e){return/^\d{3} \d{3} \d{4}$/.test(e)}},"+82":{placeholder:"10 1234 5678",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(2,e.length))),e.length>2&&(t+=" "+e.slice(2,Math.min(6,e.length))),e.length>6&&(t+=" "+e.slice(6,Math.min(10,e.length))),t},validate:function(e){return/^\d{2} \d{4} \d{4}$/.test(e)}},"+996":{placeholder:"555 123 456",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(3,e.length))),e.length>3&&(t+=" "+e.slice(3,Math.min(6,e.length))),e.length>6&&(t+=" "+e.slice(6,Math.min(9,e.length))),t},validate:function(e){return/^\d{3} \d{3} \d{3}$/.test(e)}},"+7":{placeholder:"700 123 4567",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(3,e.length))),e.length>3&&(t+=" "+e.slice(3,Math.min(6,e.length))),e.length>6&&(t+=" "+e.slice(6,Math.min(10,e.length))),t},validate:function(e){return/^\d{3} \d{3} \d{4}$/.test(e)}},"+993":{placeholder:"6 123 4567",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(1,e.length))),e.length>1&&(t+=" "+e.slice(1,Math.min(4,e.length))),e.length>4&&(t+=" "+e.slice(4,Math.min(8,e.length))),t},validate:function(e){return/^\d{1} \d{3} \d{4}$/.test(e)}},"+48":{placeholder:"123 456 789",format:function(e){let t="";return e.length>0&&(t+=e.slice(0,Math.min(3,e.length))),e.length>3&&(t+=" "+e.slice(3,Math.min(6,e.length))),e.length>6&&(t+=" "+e.slice(6,Math.min(9,e.length))),t},validate:function(e){return/^\d{3} \d{3} \d{3}$/.test(e)}}};let p="+998";function f(e){return/^[A-Za-zА-Яа-яЁёҲҳҚқҒғӢӣҶҷЎў '’-]{2,30}$/.test(e.trim())}function M(){t.style.display="none",document.body.style.overflowY="scroll"}s.addEventListener("click",(function(){"block"===m.style.display?(m.style.display="none",u.innerHTML='<polyline points="6 9 12 15 18 9"></polyline>'):(m.innerHTML="",g.forEach((function(e){const t=document.createElement("div");t.className="country-option",e.code===p&&t.classList.add("selected"),t.innerHTML=`\n          <span>${e.name}</span>\n          <span class="country-code">${e.code}</span>\n`,t.addEventListener("click",(function(){p=e.code,h.textContent=e.code,m.style.display="none";const t=y[e.code]||y["+998"];i.placeholder=t.placeholder,i.value="",a.style.display="none",u.innerHTML='<polyline points="6 9 12 15 18 9"></polyline>'})),m.appendChild(t)})),m.style.display="block",u.innerHTML='<polyline points="18 15 12 9 6 15"></polyline>')})),document.addEventListener("click",(function(e){s.contains(e.target)||m.contains(e.target)||(m.style.display="none",u.innerHTML='<polyline points="6 9 12 15 18 9"></polyline>')})),i.addEventListener("input",(function(e){const t=e.target.value.replace(/\D/g,""),n=(y[p]||y["+998"]).format(t);i.value=n,a.style.display="none"})),d.addEventListener("input",(function(){f(d.value)&&(c.style.display="none")})),e.forEach((function(e){e.addEventListener("click",(function(){t.style.display="block",document.body.style.overflowY="hidden"}))})),n.addEventListener("click",M),l.addEventListener("click",M),o.addEventListener("submit",(function(e){e.preventDefault();const t=i.value,n=d.value.trim();if(!f(n))return void(c.style.display="block");if(c.style.display="none",!(y[p]||y["+998"]).validate(t))return void(a.style.display="block");a.style.display="none",r.textContent="YUBORILMOQDA...",r.disabled=!0;const l=new Date,o=l.toLocaleDateString("uz-UZ"),s=l.toLocaleTimeString("uz-UZ"),h={Ism:n,TelefonRaqam:p+" "+t,SanaSoat:o+" - "+s};localStorage.setItem("formData",JSON.stringify(h)),window.location.href="/thankYou.html",r.textContent="DAVOM ETISH",r.disabled=!1,i.value="",d.value="",M()}));let v=120;const E=document.getElementById("timer");if(E){const e=setInterval((function(){if(v<=0)return clearInterval(e);v--;const t=Math.floor(v/60),n=v%60,l=t.toString().padStart(1,"0")+":"+n.toString().padStart(2,"0");E.textContent=l}),1e3)}}));

